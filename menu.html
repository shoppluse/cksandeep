<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cloud Kitchen Admin</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
background: linear-gradient(135deg,#ff7a18,#ffb347,#ff416c);
min-height:100vh;
font-family:sans-serif;
color:white;
}

/* GLASS CARD */
.card{
background: rgba(255,255,255,0.15);
backdrop-filter: blur(12px);
border-radius:18px;
padding:20px;
}

/* FORCE INPUT VISIBILITY */
input{
background:#ffffff !important;
color:#000000 !important;
padding:10px;
border-radius:8px;
margin-bottom:10px;
width:100%;
}

input::placeholder{
color:#444 !important;
}

button{
margin-top:8px;
}
</style>
</head>

<body class="p-8">

<h1 class="text-4xl font-bold mb-6">üçõ Kitchen Admin Panel</h1>

<!-- ADD / EDIT FORM -->
<!-- MODERN ADD / EDIT FORM -->
<div class="relative max-w-2xl mb-12 p-8 rounded-3xl shadow-2xl backdrop-blur-xl bg-white/20 border border-white/30">

<h2 class="text-3xl font-bold mb-6 tracking-wide">Manage Dish</h2>

<div class="space-y-5">

    <div class="relative">
        <input id="name" placeholder=" "
        class="peer w-full bg-white/90 text-black px-4 py-3 rounded-xl focus:outline-none focus:ring-4 focus:ring-orange-400 transition" />
        <label class="absolute left-4 top-3 text-gray-600 text-sm transition-all
        peer-placeholder-shown:top-3
        peer-placeholder-shown:text-base
        peer-placeholder-shown:text-gray-500
        peer-focus:top-[-10px]
        peer-focus:text-sm
        peer-focus:text-orange-600">
        Dish Name
        </label>
    </div>

    <div class="relative">
        <input id="category" placeholder=" "
        class="peer w-full bg-white/90 text-black px-4 py-3 rounded-xl focus:outline-none focus:ring-4 focus:ring-orange-400 transition" />
        <label class="absolute left-4 top-3 text-gray-600 text-sm transition-all
        peer-placeholder-shown:top-3
        peer-placeholder-shown:text-base
        peer-placeholder-shown:text-gray-500
        peer-focus:top-[-10px]
        peer-focus:text-sm
        peer-focus:text-orange-600">
        Category
        </label>
    </div>

    <div class="relative">
        <input id="price" type="number" placeholder=" "
        class="peer w-full bg-white/90 text-black px-4 py-3 rounded-xl focus:outline-none focus:ring-4 focus:ring-orange-400 transition" />
        <label class="absolute left-4 top-3 text-gray-600 text-sm transition-all
        peer-placeholder-shown:top-3
        peer-placeholder-shown:text-base
        peer-placeholder-shown:text-gray-500
        peer-focus:top-[-10px]
        peer-focus:text-sm
        peer-focus:text-orange-600">
        Price (‚Çπ)
        </label>
    </div>

    <button onclick="saveDish()"
    class="w-full bg-gradient-to-r from-orange-500 to-red-500 hover:scale-105 hover:shadow-xl transition-all duration-300 text-white font-semibold py-3 rounded-xl">
    Save Dish
    </button>

</div>

<input type="hidden" id="dishId">

</div>

<!-- MENU -->
<div id="menu-list" class="grid md:grid-cols-3 gap-6"></div>

<script>

const API="http://localhost:5000/api/dishes";

async function loadMenu(){
const res=await fetch(API);
const dishes=await res.json();

const container=document.getElementById("menu-list");
container.innerHTML="";

dishes.forEach(dish=>{
const card=document.createElement("div");
card.className="card";

card.innerHTML=`
<h2 class="text-xl font-bold">${dish.name}</h2>
<p>Category: ${dish.category}</p>
<p class="text-lg font-semibold mb-3">‚Çπ${dish.price}</p>

<button onclick='editDish(${JSON.stringify(dish)})' class="bg-yellow-400 px-3 py-1 rounded mr-2">Edit</button>
<button onclick="deleteDish('${dish._id}')" class="bg-red-500 px-3 py-1 rounded">Delete</button>
`;

container.appendChild(card);
});
}

async function saveDish(){

const id=document.getElementById("dishId").value;
const name=document.getElementById("name").value;
const category=document.getElementById("category").value;
const price=document.getElementById("price").value;

if(!name||!category||!price){
alert("Fill all fields");
return;
}

const data={name,category,price};

if(id){
await fetch(API+"/"+id,{
method:"PUT",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(data)
});
}else{
await fetch(API,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(data)
});
}

document.getElementById("dishId").value="";
document.getElementById("name").value="";
document.getElementById("category").value="";
document.getElementById("price").value="";

loadMenu();
}

function editDish(dish){
document.getElementById("dishId").value=dish._id;
document.getElementById("name").value=dish.name;
document.getElementById("category").value=dish.category;
document.getElementById("price").value=dish.price;
}

async function deleteDish(id){
if(confirm("Delete this dish?")){
await fetch(API+"/"+id,{method:"DELETE"});
loadMenu();
}
}

loadMenu();

</script>

</body>
</html>
