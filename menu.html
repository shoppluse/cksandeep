<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cloud Kitchen Admin</title>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body{
background: linear-gradient(135deg,#ff7a18,#ffb347,#ff416c);
min-height:100vh;
font-family:sans-serif;
color:white;
}

/* FORM CARD */
.form-card{
background: rgba(255,255,255,0.18);
backdrop-filter: blur(15px);
border-radius:22px;
padding:30px;
max-width:520px;
margin:auto;
box-shadow:0 15px 40px rgba(0,0,0,0.25);
}

/* INPUT STYLE */
.input-field{
width:100%;
padding:14px;
border-radius:12px;
color:black;
background:white;
outline:none;
margin-top:6px;
}

.input-label{
font-size:14px;
opacity:0.9;
}

/* BUTTON */
.save-btn{
background: linear-gradient(135deg,#00c853,#009624);
padding:14px;
border-radius:14px;
width:100%;
font-weight:bold;
margin-top:10px;
transition:0.25s;
}

.save-btn:hover{
transform:translateY(-2px);
box-shadow:0 8px 20px rgba(0,0,0,0.25);
}

/* DISH CARD */
.dish-card{
background: rgba(255,255,255,0.2);
backdrop-filter: blur(10px);
padding:18px;
border-radius:18px;
transition:0.25s;
}

.dish-card:hover{
transform:scale(1.03);
box-shadow:0 10px 30px rgba(0,0,0,0.3);
}

</style>

</head>

<body class="p-8">

<h1 class="text-4xl font-bold mb-8 text-center">üçõ Kitchen Admin Panel</h1>

<!-- ADD / EDIT FORM -->

<div class="form-card mb-12">

<h2 id="formTitle" class="text-2xl font-bold mb-6 text-center">Add New Dish</h2>

<label class="input-label">Dish Name</label> <input id="name" class="input-field" placeholder="Paneer Butter Masala">

<label class="input-label">Category</label> <select id="category" class="input-field">

<option>Rice</option>
<option>Curry</option>
<option>Breads</option>
<option>Chinese</option>
<option>Beverage</option>
<option>Dessert</option>
</select>

<label class="input-label">Price (‚Çπ)</label> <input id="price" type="number" class="input-field" placeholder="150">

<button onclick="saveDish()" class="save-btn">Save Dish</button>

<input type="hidden" id="dishId">

</div>

<!-- MENU -->

<div id="menu-list" class="grid md:grid-cols-3 gap-6"></div>

<script>

const API="https://cloud-kitchen-w9zx.onrender.com/api/dishes";
async function loadMenu(){
const res=await fetch(API);
const dishes=await res.json();

const container=document.getElementById("menu-list");
container.innerHTML="";

dishes.forEach(dish=>{
const card=document.createElement("div");
card.className="dish-card";

card.innerHTML=`
<h2 class="text-xl font-bold mb-2">${dish.name}</h2>
<p class="opacity-80">${dish.category}</p>
<p class="text-lg font-semibold mb-3">‚Çπ${dish.price}</p>

<div class="flex gap-2">
<button onclick='editDish(${JSON.stringify(dish)})' class="bg-yellow-400 text-black px-3 py-1 rounded">Edit</button>
<button onclick="deleteDish('${dish._id}')" class="bg-red-500 px-3 py-1 rounded">Delete</button>
</div>
`;

container.appendChild(card);
});
}

async function saveDish(){

const id=document.getElementById("dishId").value;
const name=document.getElementById("name").value;
const category=document.getElementById("category").value;
const price=document.getElementById("price").value;

if(!name||!category||!price){
alert("Fill all fields");
return;
}

const data={name,category,price};

if(id){
await fetch(API+"/"+id,{
method:"PUT",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(data)
});
document.getElementById("formTitle").innerText="Add New Dish";
}else{
await fetch(API,{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify(data)
});
}

document.getElementById("dishId").value="";
document.getElementById("name").value="";
document.getElementById("category").value="";
document.getElementById("price").value="";

loadMenu();
}

function editDish(dish){
document.getElementById("formTitle").innerText="Edit Dish";
document.getElementById("dishId").value=dish._id;
document.getElementById("name").value=dish.name;
document.getElementById("category").value=dish.category;
document.getElementById("price").value=dish.price;
window.scrollTo({top:0,behavior:"smooth"});
}

async function deleteDish(id){
if(confirm("Delete this dish?")){
await fetch(API+"/"+id,{method:"DELETE"});
loadMenu();
}
}

loadMenu();

</script>

</body>
</html>
